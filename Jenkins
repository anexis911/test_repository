node {

    stage ('Git_Download'){
        git credentialsId: 'git_creds', url: 'https://github.com/anexis911/test_repository'
        }
    stage ('Docker_Build'){
      sh 'docker build -t python/test_tomcat.latest .'
    }
    stage ('Docker Login'){
        withCredentials([usernamePassword(credentialsId: 'dockerhub_anexis', usernameVariable: 'USERNAME', passwordVariable: 'PASSWORD')]){
                    sh """
                    docker login -u $USERNAME -p $PASSWORD
                    """
                    }
    }
    stage ('Docker push'){
        sh '''
                docker push python/test_tomcat.latest
                '''
    }
}
